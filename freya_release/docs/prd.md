---
stepsCompleted:
  - 1
  - 2
  - 3
  - 4
  - 5
  - 6
  - 7
  - 8
  - 9
  - 10
  - 11
inputDocuments:
  - docs/analysis/product-brief-freya-2025-12-12.md
  - docs/analysis/research/technical-local-persistence-research-2025-12-12.md
documentCounts:
  briefs: 1
  research: 1
  brainstorming: 0
  projectDocs: 0
workflowType: 'prd'
lastStep: 11
project_name: 'freya'
user_name: 'Carlos'
date: '2025-12-12'
---

# Product Requirements Document - freya

**Author:** Carlos
**Date:** 2025-12-12

## Executive Summary

F.R.E.Y.A. (Fully Responsive Enhanced Yield Assistant) is a local-first AI Executive Assistant integrated directly into the IDE, designed to solve the critical problem of information loss and cognitive overload for high-performance Enterprise Scrum Masters. By ingesting unstructured natural language "dumps" regarding project status, blockers, and career goals, FREYA automatically parses, structures, and persists this data into a local JSON knowledge base. The system operates on a "Chaos In, Order Out" principle, providing instant, hallucination-free recall ("Oracle Mode") and strategic career coaching without leaving the development environment.

### What Makes This Special

-   **Zero-Friction Ingestion:** Accepts raw, messy text input and structures it silently, removing the burden of manual organization.
-   **Local-First Architecture:** Ensures total privacy and data sovereignty by storing all knowledge in local, version-controlled JSON files—critical for enterprise contexts.
-   **Domain-Specific Persona:** Acts not as a generic assistant but as an expert Scrum Master coach, understanding the nuances of "blockers," "stakeholders," and "career progression."
-   **No-UI Approach:** Eliminates dashboard fatigue by relying entirely on a high-speed chat interface for interaction.

## Project Classification

**Technical Type:** developer_tool
**Domain:** general
**Complexity:** low
**Project Context:** Greenfield - new project

**Classification Notes:**
Identified as a `developer_tool` due to its nature as an IDE-integrated assistant (VSCode extension/agent) focused on productivity. While the domain touches on project management, it fits the `general` productivity software category with `low` complexity relative to regulated industries, though the technical implementation of local persistence adds architectural nuance.

## Success Criteria

### User Success
-   **Meeting Readiness:** User can generate a complete context briefing ("Prepare me for the Vivo+ meeting") in < 30 seconds with 100% accuracy on historical context.
-   **Long-Term Recall:** User successfully retrieves granular details from closed projects (> 1 year ago) without manual digging.
-   **Confidence:** User reports a subjective reduction in anxiety regarding "dropped balls" or forgotten details.

### Business Success
-   **Stakeholder Satisfaction:** Positive feedback on the clarity, speed, and accuracy of status reports and answers generated by the user.
-   **Career Velocity:** Measurable progress in career goals (certifications, promotions) tracked and nudged by FREYA.
-   **Operational Efficiency:** Reduction in time spent compiling manual reports, freeing up time for strategic problem solving.

### Technical Success
-   **Recall Accuracy:** % of queries where FREYA provides the correct answer immediately without hallucination.
-   **Ingestion Success:** % of unstructured "dumps" correctly parsed into the right Project/Stream JSON buckets.
-   **Response Time:** Time to generate a complex status report (Target: < 1 minute).
-   **Data Integrity:** Zero data corruption or loss during ingestion and persistence operations.

### Measurable Outcomes
-   **Time Saved:** User saves at least 4 hours per week on administrative tasks (reporting, organizing notes).
-   **Response Speed:** User responds to ad-hoc stakeholder queries 5x faster than before.

## Product Scope

### MVP - Minimum Viable Product
-   **Native Chat Integration:** Zero-UI approach; utilizes existing VSCode/Cursor chat interface.
-   **Unstructured Ingestion Engine:** Ability to parse mixed-context natural language dumps and route data to JSON stores.
-   **Local Knowledge Base:** Automated creation/management of hierarchical JSON structure (Client > Project > Stream).
-   **Career & Promotion Coach:** Module for tracking achievements against career progression goals.
-   **Oracle Query System:** Context-aware retrieval from local JSONs.

### Growth Features (Post-MVP)
-   **Proactive Nudging:** FREYA initiating conversations about stale goals or lack of updates.
-   **Advanced RAG:** Vector search for semantic understanding of long-term history.
-   **Template Generation:** Automated creation of slide decks or formal documents from status data.

### Vision (Future)
-   **Multi-Device Support:** Secure sync to mobile for on-the-go updates.
-   **Team Integration:** Ability to share specific knowledge contexts with other team members securely.
-   **External Integrations:** Controlled connections to Jira/Workday APIs once security patterns are proven.

## User Journeys

### Jornada 1: O Caos Sob Controle (Ingestão e Recall Imediato)
**Persona:** Carlos, no meio de uma terça-feira frenética.

**Cena de Abertura:** Carlos acaba de sair de três reuniões consecutivas do projeto Vivo+. Sua cabeça está girando com bloqueios técnicos, decisões de arquitetura e um pedido urgente de um VP sobre um prazo. Ele tem 5 minutos antes da próxima reunião e sente a ansiedade subir — se ele não anotar isso agora, vai esquecer.

**Ação Crescente:** Ele abre o Cursor e invoca a F.R.E.Y.A. Sem se preocupar com formatação, ele digita um "dump" mental rápido e sujo: "Reunião Vivo+: API de pagamentos bloqueada por firewall, falar com João da Infra. VP quer prazo da feature X para sexta. Ah, completei a certificação SAFe ontem."

**Clímax:** A F.R.E.Y.A. processa o texto instantaneamente. O "mágico" acontece: ela identifica o bloqueio e o arquiva no JSON do projeto Vivo+; agenda o lembrete do prazo; e, crucialmente, extrai a certificação SAFe e a registra no seu Log de Carreira. Ela responde apenas: "Registrado. Bloqueio em Vivo+ atualizado e Certificação adicionada ao perfil."

**Resolução:** A ansiedade de Carlos desaparece. Ele sabe que a informação está segura, estruturada e recuperável. Ele entra na próxima reunião com a mente clara, focado na estratégia, não na memorização.

### Jornada 2: O Oráculo Executivo (Recuperação de Longo Prazo)
**Persona:** Carlos, em uma reunião de revisão trimestral com a Liderança.

**Cena de Abertura:** Um Diretor faz uma pergunta inesperada sobre uma decisão tomada há quatro meses no projeto XPTO, que já foi encerrado. O clima na sala fica tenso; ninguém lembra os detalhes exatos. O "silêncio constrangedor" se instala.

**Ação Crescente:** Enquanto outros procuram em e-mails antigos e notas do OneNote, Carlos digita discretamente para a F.R.E.Y.A.: "Qual foi a decisão sobre a migração do banco no projeto XPTO e quem aprovou?"

**Clímax:** Em segundos, a F.R.E.Y.A. consulta os arquivos JSON históricos e retorna: "Decisão tomada em 12/Ago: Migração adiada para Q4 por risco de latencia. Aprovada por Maria Silva (Arquiteta)." Carlos lê a resposta em voz alta com confiança absoluta.

**Resolução:** A tensão se dissipa. O Diretor fica impressionado com a precisão e o controle de Carlos sobre o histórico. Carlos reforça sua reputação como o profissional mais organizado e confiável da sala.

### Jornada 3: O Estrategista de Carreira (Crescimento Profissional)
**Persona:** Carlos, preparando-se para sua avaliação de desempenho anual.

**Cena de Abertura:** É época de avaliação na Accenture. Carlos precisa preencher seu formulário de autoavaliação, mas, como sempre, ele estava tão focado nas entregas do dia a dia que mal lembra o que realizou de importante há 8 meses. Ele encara a tela em branco, frustrado por não ter documentado suas vitórias.

**Ação Crescente:** Ele pede à F.R.E.Y.A.: "Gere meu 'Brag Sheet' deste ano. Foco em resolução de conflitos e certificações."

**Clímax:** A F.R.E.Y.A. varre um ano de logs diários. Ela compila uma lista cronológica de conquistas que Carlos havia esquecido: o dia em que ele desbloqueou a equipe crítica, os elogios recebidos em reuniões (que ele anotou casualmente) e as duas certificações concluídas. Ela estrutura isso alinhado com as competências exigidas para o próximo nível de senioridade.

**Resolução:** Carlos submete uma autoavaliação rica em dados e evidências concretas. Ele se sente empoderado e pronto para defender sua promoção, transformando um processo administrativo doloroso em uma vitrine de sucesso.

### Journey Requirements Summary

Essas jornadas revelam os seguintes requisitos funcionais críticos:

1.  **Ingestão Inteligente (NLP):** Capacidade de separar múltiplos contextos (Projeto, Carreira, Tarefa) de um único input de texto não estruturado.
2.  **Persistência Estruturada:** O sistema deve manter JSONs separados e hierárquicos para permitir a recuperação precisa por contexto (ex: buscar só em "Carreira" ou só em "Projeto X").
3.  **Busca Semântica/Keyword (Oracle):** Capacidade de busca rápida e precisa em arquivos históricos (arquivados).
4.  **Tagging Automático:** Identificação automática de entidades (Pessoas, Datas, Decisões) para enriquecer os metadados.
5.  **Interface Zero-Friction:** Tudo deve acontecer no chat do IDE, sem abrir janelas ou formulários extras.

## Innovation & Novel Patterns

### Detected Innovation Areas

1.  **Paradigma "Chaos In, Order Out" (Agilidade Extrema):**
    *   **Inovação:** Inverte o fluxo tradicional de produtividade. Em vez de exigir que o usuário estruture os dados *antes* de salvar (escolher pasta, colocar tags), a F.R.E.Y.A. aceita o caos total e assume o ônus cognitivo da organização.
    *   **Diferencial:** Elimina a barreira de entrada para o registro de informações. Se o usuário tiver que pensar onde salvar, a ferramenta falha.

2.  **Local-First AI Sovereignty (Segurança por Design):**
    *   **Inovação:** Traz a inteligência de um "Executive Assistant" para dentro do perímetro seguro do IDE, sem depender de nuvens de terceiros para persistência.
    *   **Valor:** Resolve o bloqueio de adoção em grandes empresas (como a Accenture/Vivo) eliminando o risco de vazamento de dados confidenciais (PII/Business Secrets).

### Market Context & Competitive Landscape

*   **Ferramentas de Notas (Obsidian, Notion):** Exigem organização manual ou plugins complexos. Falham na "inteligência ativa" de estruturar o caos automaticamente.
*   **Assistentes de IA (ChatGPT, Claude):** Geralmente baseados em nuvem (risco de segurança) e carecem de memória persistente e estruturada de longo prazo sobre projetos específicos.
*   **A F.R.E.Y.A.** ocupa o nicho único de "Agente Inteligente Local" que vive onde o trabalho acontece (IDE).

### Validation Approach

1.  **Verificação "Glass Box" (Transparência):** Como os dados são persistidos em JSON/Markdown legíveis localmente, o usuário pode abrir os arquivos e validar visualmente se a estruturação (tags, hierarquia) foi feita corretamente.
2.  **Verificação Funcional (Oracle Test):** A validação final ocorre no uso: "Se eu perguntar sobre X e ela responder corretamente, a ingestão funcionou."

### Risk Mitigation

*   **Falha de Parseamento:** Se a IA não entender o "caos", o dado bruto é sempre preservado em um `daily-log.md` imutável. Nada é perdido, apenas não estruturado.
*   **Correção Manual:** Por ser Local-First e baseada em arquivos de texto, qualquer erro de categorização pode ser corrigido manualmente pelo usuário editando o JSON/Markdown, sem necessidade de interfaces de admin complexas.

## [Developer Tool] Specific Requirements: AI Agent System

### Project-Type Overview
F.R.E.Y.A. não é uma extensão binária, mas um **Conjunto de Agentes de IA (System of Rules)** definidos através de arquivos de contexto e regras (`.mdc` / `.md`). Ela opera nativamente dentro do chat do Cursor/VSCode, alavancando o LLM subjacente (Claude/GPT) para executar a lógica de negócio definida nos prompts.

### Technical Architecture Considerations

*   **Runtime Environment:** Cursor IDE / VSCode Copilot Chat.
*   **Core Technology:** Prompt Engineering & Context Management (Markdown Rules).
*   **Language Matrix:**
    *   **Logic Definition:** Natural Language (Português/Inglês) em arquivos Markdown.
    *   **Data Structure:** JSON Schema (para persistência).
    *   **Scripting (Opcional):** Shell/Python apenas se necessário para automações via MCP (Model Context Protocol), mas o core é "Prompt-based".

### Implementation Considerations

*   **Installation Methods:**
    *   Cópia simples da pasta `.cursor/rules` (ou `.vscode`) para a raiz do projeto do usuário.
    *   Distribuição via arquivo `.zip` ou repositório Git de templates (Dotfiles).
*   **API Surface (Conversational Interface):**
    *   Interação puramente conversacional (Chat).
    *   Gatilhos via `@mentions` (ex: `@freya`, `@freya/ingest`, `@freya/career`).
*   **File Generation Capabilities:**
    *   O agente deve ter permissão e instrução explícita para criar/editar arquivos no sistema de arquivos local (JSONs de dados e Logs).

### Required Documentation (from CSV adapted)

*   **Agent Manifest:** Lista de todos os "sub-agentes" ou personas (ex: Ingestor, Oracle, Career Coach).
*   **Context Rules:** Definição clara de quais arquivos o agente deve ler antes de responder (Contexto de Memória).
*   **Prompt Architecture:** Estrutura dos System Prompts para garantir que a persona "Scrum Master" não seja quebrada.

## Project Scoping & Phased Development

### MVP Strategy & Philosophy

**MVP Approach:** Problem-Solving MVP (Chaos In, Order Out)
**Resource Requirements:** 1 Developer (Carlos) acting as User + Architect. No external infrastructure.

### MVP Feature Set (Phase 1)

**Core User Journeys Supported:**
1.  Ingestão de Logs Diários (O Caos Sob Controle)
2.  Recuperação de Informação Básica (O Oráculo Executivo)

**Must-Have Capabilities:**
*   **Core Agent System:** Configuração da persona "F.R.E.Y.A." no Cursor (`.cursor/rules`).
*   **Ingestão Universal:** Capacidade de processar inputs de texto não estruturados e atualizar arquivos JSON (`projects.json`, `career.json`).
*   **Oracle Mode (Read-Only):** Capacidade de ler e sintetizar respostas a partir dos arquivos JSON locais.
*   **Immutable Daily Log:** Persistência de backup de todos os inputs em um arquivo de log diário sequencial.

### Post-MVP Features

**Phase 2 (Growth - "Smart Assistant"):**
*   **Advanced RAG:** Busca semântica para encontrar conexões não óbvias.
*   **Proactive Nudging:** Agente sugere atualizações com base em datas ou falta de atividade.
*   **Template Generation:** Criação de drafts de e-mail/relatórios a partir dos dados.

**Phase 3 (Expansion - "Team Leader"):**
*   **Voice Input:** Integração com speech-to-text.
*   **Team Context:** Compartilhamento seguro de contextos específicos com outros usuários.
*   **Integrations:** Conectores (opcionais) para Jira/ADO via MCP.

### Risk Mitigation Strategy

**Technical Risks:**
*   **Context Window Overflow:** Se os arquivos JSON crescerem demais, o agente pode falhar.
    *   *Mitigação:* Arquitetura de "Sharded JSONs" (um por projeto) e instruções para ler apenas o necessário.
*   **Hallucination:** O agente inventar dados não existentes nos JSONs.
    *   *Mitigação:* System Prompt rígido: "Responda APENAS com base nos arquivos lidos. Se não souber, diga 'Não encontrei'."

**Market/Adoption Risks:**
*   **Trust:** Usuário não confiar que os dados estão salvos.
    *   *Mitigação:* "Glass Box" UX - mostrar o caminho do arquivo salvo a cada confirmação.

## Functional Requirements

### Agent Interaction & Persona

- FR1: O usuário pode invocar o agente no chat do Cursor/VSCode usando linguagem natural.
- FR2: O sistema deve responder adotando exclusivamente a persona "Senior Scrum Master Coach" (direta, pragmática, orientada a dados).
- FR3: O sistema deve manter o contexto da conversa ativa (thread) para perguntas de acompanhamento.

### Knowledge Ingestion (The Funnel)

- FR4: O sistema deve aceitar inputs de texto não estruturado contendo múltiplos contextos (ex: status de projeto misturado com metas de carreira).
- FR5: O sistema deve identificar e extrair automaticamente entidades do texto (Nomes de Projetos, Datas, Pessoas, Bloqueios).
- FR6: O sistema deve categorizar cada fragmento de informação extraído em um dos domínios suportados: "Project", "Career", "Blocker" ou "General Log".

### Knowledge Persistence (The Brain)

- FR7: O sistema deve manter uma estrutura de diretórios hierárquica e semântica (ex: `/data/Clients/Vivo/VivoPlus/PaymentStream/status.json`) para suportar escalabilidade de longo prazo.
- FR8: O sistema deve gerar um "Daily Log" (arquivo Markdown) contendo o registro bruto e imutável de todas as interações do dia.
- FR9: O sistema deve atualizar os arquivos JSON estruturados sem sobrescrever dados históricos (append/update logic).
- FR15 (Lifecycle Management): O sistema deve permitir marcar projetos/temas como "Archived", removendo-os da visualização ativa diária mas mantendo-os disponíveis para busca histórica.

### Oracle & Retrieval (Recall)

- FR10: O usuário pode solicitar resumos de status por projeto (ex: "Status do Vivo+").
- FR11: O sistema deve ler os arquivos JSON locais para responder a perguntas factuais.
- FR12: O sistema deve citar a data/origem da informação ao fornecer uma resposta factual (para evitar alucinação).

### Career Coaching Module

- FR13: O sistema deve registrar conquistas, feedbacks e certificações no `career-log.json`.
- FR14: O usuário pode solicitar a geração de um "Brag Sheet" (lista de conquistas) filtrado por período.

## Non-Functional Requirements

### Privacy & Data Sovereignty

- NFR1: Nenhum dado do usuário (texto de entrada ou JSONs processados) deve ser enviado para servidores externos ou telemetria de terceiros, exceto para a API do LLM configurado no Cursor (que o usuário já aceitou).
- NFR2: Todos os arquivos de dados devem residir estritamente dentro do diretório do projeto ou workspace local do usuário.

### Performance & Resource Usage

- NFR3: O processamento de ingestão (NLP parsing) não deve bloquear a thread principal do editor (UI freeze) por mais de 50ms.
- NFR4: O "Oracle Query" deve retornar respostas em menos de 5 segundos para consultas em bases de conhecimento < 10MB.

### Reliability & Data Integrity

- NFR5 (Atomic Writes): Todas as operações de escrita em arquivos JSON devem usar escrita atômica (escrever em temp -> renomear) para prevenir corrupção em caso de falha no meio da escrita.
- NFR6 (Fallback Logging): Em caso de falha no parsing estruturado, o input original DEVE ser anexado ao `daily-log.md` como texto plano, garantindo zero perda de informação.

### Maintainability (Structure)

- NFR7: Os arquivos JSON devem seguir um Schema rigoroso para permitir futura migração ou integração com ferramentas de visualização (dashboards).
